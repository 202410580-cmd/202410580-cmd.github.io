<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìºë¦­í„° ìƒì„± & ëª©ë¡</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 30px;
        }
        textarea, input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
        }
        textarea {
            height: 250px;
        }
        button {
            padding: 10px 20px;
            margin: 5px 0;
            font-size: 16px;
            cursor: pointer;
        }
        #charList {
            margin-top: 20px;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 6px;
        }
        #charList div {
            margin-bottom: 10px;
            padding: 10px;
            background: #f7f7f7;
            border-radius: 6px;
        }
        #charList button {
            margin-left: 5px;
        }
    </style>
</head>
<body>

<h1>ìºë¦­í„° ìƒì„±</h1>

<div class="char-card">
    <label>ìºë¦­í„° ì´ë¯¸ì§€:</label><br>
    <input type="file" accept="image/*" id="imageInput"><br>
    <img id="imagePreview" class="preview-img" style="max-width:150px; display:none; border:1px solid #aaa; margin-top:5px;">

    <script>
        let currentImageData = "";

        document.getElementById('imageInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(evt) {
                currentImageData = evt.target.result;
                const preview = document.getElementById('imagePreview');
                preview.src = currentImageData;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        });
    </script>

    <br><br>
</div>


<label>ìºë¦­í„° ì´ë¦„</label>
<input id="charName" type="text" placeholder="ì˜ˆ: ë Œ, ì¹´ì¸, ë£¨ë¯¸ë„ˆìŠ¤ ë“±">

<label style="margin-top:10px; display:block;">ìºë¦­í„° ì„¤ëª…</label>
<textarea id="charDesc" placeholder="ì—¬ê¸°ì— ìºë¦­í„° í…œí”Œë¦¿ì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤."></textarea>

<button onclick="applyTemplate()">í…œí”Œë¦¿ ë¶ˆëŸ¬ì˜¤ê¸°</button>
<button onclick="saveCharacter()">ì €ì¥í•˜ê¸°</button>
<button onclick="clearInput()">ì‘ì„±ì°½ ë¹„ìš°ê¸°</button>

<hr>

<h2>ì €ì¥ëœ ìºë¦­í„° ëª©ë¡</h2>
<div id="charList"></div>


<script>
function applyTemplate() {

    const template = 
`[ê¸°ë³¸ ì •ë³´]
Â· ë‚˜ì´:
Â· ì„±ë³„:
Â· ì¢…ì¡±:
Â· ì§ì—… / ì—­í• :

[ëŠ¥ë ¥ì¹˜]
Â· í˜:
Â· ë¯¼ì²©:
Â· ì²´ë ¥:
Â· ì§€ëŠ¥:
Â· ê°ê°:
Â· ë§¤ë ¥:

[ë°°ê²½ ì´ì•¼ê¸°]
ì—¬ê¸°ì— ìºë¦­í„°ì˜ ì¶œìƒ, ì„±ì¥ ê³¼ì •, ì‚¬ê±´ ë“±ì„ ì‘ì„±í•˜ì„¸ìš”.

[ìŠ¤í‚¬ / ê¸°ìˆ ]
Â· ìŠ¤í‚¬ 1:
Â· ìŠ¤í‚¬ 2:
Â· ìŠ¤í‚¬ 3:

[ì¥ë¹„]
Â· ë¬´ê¸°:
Â· ë°©ì–´êµ¬:
Â· ê¸°íƒ€ ì¥ë¹„:

[ê¸°íƒ€ ë©”ëª¨]
ì¶”ê°€ì ì¸ íŠ¹ì§•, ìŠµê´€, ë§íˆ¬ ë“±ì„ ì ìœ¼ì„¸ìš”.
`;

    document.getElementById("charDesc").value = template;
}

function saveCharacter() {
    const name = document.getElementById("charName").value.trim();
    const desc = document.getElementById("charDesc").value.trim();

    if (!name || !desc) {
        alert("ìºë¦­í„° ì´ë¦„ê³¼ ì„¤ëª…ì„ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”.");
        return;
    }

    let list = JSON.parse(localStorage.getItem("characterList") || "[]");

    
    const existingIndex = list.findIndex(c => c.name === name);
    if (existingIndex !== -1) {
        if (!confirm("ë™ì¼í•œ ì´ë¦„ì˜ ìºë¦­í„°ê°€ ìˆìŠµë‹ˆë‹¤. ë®ì–´ì“¸ê¹Œìš”?")) return;
        list[existingIndex].desc = desc;
    } else {
        list.push({ name, desc });
    }

    localStorage.setItem("characterList", JSON.stringify(list));
    alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
    loadList();
}

function loadList() {
    const container = document.getElementById("charList");
    container.innerHTML = "";

    let list = JSON.parse(localStorage.getItem("characterList") || "[]");

    if (list.length === 0) {
        container.innerHTML = "<p>ì €ì¥ëœ ìºë¦­í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
        return;
    }

    list.forEach((char, index) => {
        const div = document.createElement("div");
        div.innerHTML = `
            <strong>${char.name}</strong><br>
            <button onclick="loadCharacter(${index})">ë¶ˆëŸ¬ì˜¤ê¸°</button>
            <button onclick="deleteCharacter(${index})">ì‚­ì œ</button>
        `;
        container.appendChild(div);
    });
}

function loadCharacter(index) {
    let list = JSON.parse(localStorage.getItem("characterList") || "[]");
    const char = list[index];

    document.getElementById("charName").value = char.name;
    document.getElementById("charDesc").value = char.desc;

    alert("ìºë¦­í„°ê°€ ë¶ˆëŸ¬ì™€ì¡ŒìŠµë‹ˆë‹¤!");
}

function deleteCharacter(index) {
    if (!confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

    let list = JSON.parse(localStorage.getItem("characterList") || "[]");
    list.splice(index, 1);
    localStorage.setItem("characterList", JSON.stringify(list));

    loadList();
}

function clearInput() {
    document.getElementById("charName").value = "";
    document.getElementById("charDesc").value = "";
}

loadList();

</script>
<div style="text-align:center; margin-top:20px;">
    <a href="map.html" target="_blank">
        <button style="padding:10px 20px; font-size:16px;">ğŸ—ºï¸ ë§µ ì´ë™ í˜ì´ì§€ ì—´ê¸°</button>
    </a>
</div>

</body>
</html>
